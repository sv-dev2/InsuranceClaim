@model InsuranceClaim.Models.ClaimNotificationModel
@{
    ViewBag.Title = "EditClaimant";
    Layout = "~/Views/Shared/_InsuranceMain.cshtml";
}



<div class="body-content-section">


    <div class="form-section-top">
        <div class="container">
            @{
                var menutab = Html.Partial("ClaimRegister");
            }
            @menutab
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 form-section-col">
                    <div class="form-group-section">
                        <div class="form-title">
                            <h4>Edit Claimant</h4>
                        </div>
                        <div class="form-group-input">

                            @using (Html.BeginForm("EditClaimant", "Claimant", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
                            {
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 form-group-text">
                                        <div class="form-group">
                                            @Html.LabelFor(x => x.PolicyNumber, new { @class = "gender-label" })
                                            @*@Html.TextBoxFor(x => x.PolicyNumber, new { @class = "form-control", @name = "Name", @autocomplete = "off", @id = "PolicyNumber", @placeholder = "Enter Policy Number" })*@
                                            @Html.TextBoxFor(x => x.PolicyNumber, new { @class = "form-control", @autocomplete = "off", @placeholder = "Enter Policy Number", @Id = "txtPolicyNumber" })
                                            @Html.ValidationMessageFor(x => x.PolicyNumber, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-md-6 form-group-text">
                                        <div class="form-group">
                                            @Html.LabelFor(x => x.DateOfLoss, new { @class = "gender-label" })
                                            <div class="form-group-label">

                                                <div class='input-group' id='datetime2'>
                                                    @Html.TextBoxFor(x => x.DateOfLoss, new { @class = "form-control", @placeholder = "DOB" })

                                                    <span class="input-group-addon">
                                                        <span class="glyphicon glyphicon-calendar"></span>
                                                    </span>
                                                </div>
                                                @Html.ValidationMessageFor(x => x.DateOfLoss, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                    </div>
                                </div>



                                <div class="row">
                                    <div class="col-sm-6 col-md-6 form-group-text">
                                        <div class="form-group">
                                            @Html.LabelFor(x => x.PlaceOfLoss, new { @class = "gender-label" })
                                            @Html.TextBoxFor(x => x.PlaceOfLoss, new { @class = "form-control", @name = "Place", @autocomplete = "off", @id = "Place", @placeholder = "Enter Place" })
                                            @Html.ValidationMessageFor(x => x.PlaceOfLoss, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-md-6 form-group-text">
                                        <div class="form-group">
                                            @Html.LabelFor(x => x.DescriptionOfLoss, new { @class = "gender-label" })
                                            @Html.TextBoxFor(x => x.DescriptionOfLoss, new { @class = "form-control", @name = "Description", @autocomplete = "off", @id = "Description", @placeholder = "Enter Description" })
                                            @Html.ValidationMessageFor(x => x.DescriptionOfLoss, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-sm-6 col-md-6 form-group-text">
                                        <div class="form-group">
                                            @Html.LabelFor(x => x.EstimatedValueOfLoss, new { @class = "gender-label" })
                                            @Html.TextBoxFor(x => x.EstimatedValueOfLoss, new { @class = "form-control", @name = "Estimated", @autocomplete = "off", @id = "EstimatedValue", @placeholder = "Enter Estimated Value" })
                                            @Html.ValidationMessageFor(x => x.EstimatedValueOfLoss, "", new { @class = "text-danger" })
                                        </div>
                                    </div>
                                    <div class="col-sm-6 col-md-6 form-group-text">
                                        <div class="form-group">
                                            <label class="radio-label">Third Party Involvement(Y/N)</label>
                                            <div class="form-group-radio">
                                                <label>@Html.RadioButtonFor(x => x.ThirdPartyInvolvement, true)Yes</label>
                                                <label>@Html.RadioButtonFor(x => x.ThirdPartyInvolvement, false)No</label>
                                                @Html.ValidationMessageFor(x => x.ThirdPartyInvolvement, "", new { @class = "text-danger" })
                                            </div>
                                        </div>
                                        @*<div class="form-group">
                                            @Html.LabelFor(x => x.ThirdPartyInvolvement, new { @class = "gender-label" })
                                            @Html.TextBoxFor(x => x.ThirdPartyInvolvement, new { @class = "form-control", @name = "ThirdPartyInvolvement", @autocomplete = "off", @id = "ThirdPartyInvolvement", @placeholder = "Enter Third Party Involvement" })
                                            @Html.ValidationMessageFor(x => x.ThirdPartyInvolvement, "", new { @class = "text-danger" })
                                        </div>*@
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6 col-md-6 form-group-text">
                                        <div class="form-group">
                                            @Html.LabelFor(x => x.ClaimantName, new { @class = "gender-label" })
                                            @Html.TextBoxFor(x => x.ClaimantName, new { @class = "form-control", @autocomplete = "off", @placeholder = "Enter Claimant Name" })
                                            @Html.ValidationMessageFor(x => x.ClaimantName, "", new { @class = "text-danger" })
                                        </div>

                                    </div>
                                </div>

                                <div class="col-md-12 next-btn">
                                    <div class="row">
                                        <div class="col-sm-6 col-md-6">
                                            <div class="text-left">
                                                <button type="button" class="btn" onclick="window.location.href='@Url.Action("ClaimantList","Claimant")'">Cancel</button>
                                            </div>
                                        </div>
                                        <div class="col-sm-6 col-md-6">
                                            <div class="text-right">
                                                <button type="submit" class="btn">Update</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            }

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function () {
        $("#datetime2").datetimepicker({
            format: 'MM/D/YYYY',
            maxDate: new Date()
        });
        var policyNumbersArray = [];
        //Getting Policy Numbers from database
        getPolicyNumbers();

        function getPolicyNumbers() {
            $.ajax({
                url: "/Claimant/GetAutoSuggestions",
                type: "POST",
                async: false,
                dataType: "json",
                success: function (data) {
                    for (var i = 0; i < data.length; i++) {
                        policyNumbersArray.push(data[i].PolicyNumber);
                    }
                }
            })
        };

        $("#txtPolicyNumber").autocomplete({
            source: policyNumbersArray
        });
    });
    //getting Claimantname

    $("#txtPolicyNumber").change(function () {

        $("#txtPolicyNumber").val();
        $.ajax({
            url: "/Claimant/GetCustomername",
            type: "POST",
            async: false,
            data: { Policynumber: $("#txtPolicyNumber").val() },
            dataType: "json",
            success: function (data) {
                debugger;
                $("#ClaimantName").val(data)
            }

        })


    });


</script>